select(species, decimalLatitude, decimalLongitude)
all_species_splink <-
rspeciesLink(filename = "all_species_splink",
species = splist,
Coordinates = "Yes",
CoordinatesQuality = "Good")
all_species_splink <-
all_species_splink[
!duplicated(paste(
all_species_splink$scientificName, all_species_splink$decimalLongitude,
all_species_splink$decimalLatitude
)),
]
all_species_splink <- all_species_splink %>%
rename(scientificName = species) %>%
select(species, decimalLatitude, decimalLongitude)
all_species_splink <- all_species_splink %>%
rename(species = scientificName) %>%
select(species, decimalLatitude, decimalLongitude)
all_species_gbif <-
all_species %>%
select(species, decimalLatitude, decimalLongitude) %>%
drop_na()
all_species_gbif <-
all_species_gbif[
!duplicated(paste(
all_species_gbif$species, all_species_gbif$decimalLongitude,
all_species_gbif$decimalLatitude
)),
]
all_species_gbif %>% bind_rows(all_species_splink)
glimpse(all_species_gbif)
glimpse(all_species_splink)
all_species_splink <- all_species_splink %>%
rename(species = scientificName) %>%
select(species, decimalLatitude, decimalLongitude) %>%
mutate(decimalLatitude = as.numeric(decimalLatitude),
decimalLongitude = as.numeric(decimalLongitude))
all_species_splink <-
rspeciesLink(filename = "all_species_splink",
species = splist,
Coordinates = "Yes",
CoordinatesQuality = "Good")
all_species_splink <-
all_species_splink[
!duplicated(paste(
all_species_splink$scientificName, all_species_splink$decimalLongitude,
all_species_splink$decimalLatitude
)),
]
all_species_splink <- all_species_splink %>%
rename(species = scientificName) %>%
select(species, decimalLatitude, decimalLongitude) %>%
mutate(decimalLatitude = as.numeric(decimalLatitude),
decimalLongitude = as.numeric(decimalLongitude))
all_species_splink <-
all_species_splink_raw[
!duplicated(paste(
all_species_splink_raw$scientificName,
all_species_splink_raw$decimalLongitude,
all_species_splink_raw$decimalLatitude
)),
]
all_species_splink_raw <-
rspeciesLink(filename = "all_species_splink",
species = splist,
Coordinates = "Yes",
CoordinatesQuality = "Good")
all_species_splink <-
all_species_splink_raw[
!duplicated(paste(
all_species_splink_raw$scientificName,
all_species_splink_raw$decimalLongitude,
all_species_splink_raw$decimalLatitude
)),
]
all_species_splink <- all_species_splink %>%
rename(species = scientificName) %>%
select(species, decimalLatitude, decimalLongitude) %>%
mutate(decimalLatitude = as.numeric(decimalLatitude),
decimalLongitude = as.numeric(decimalLongitude))
View(all_species_gbif)
styler:::style_selection()
all_species_gbif %>% bind_rows(all_species_splink)
anopheles_df <-
all_species_gbif %>%
bind_rows(all_species_splink)
rm(df)
rm(df2, ec03, sp_an)
rm(ex03)
styler:::style_selection()
df <-
read.table("data/all_anopheles.txt", header = T)
df
df <-
read.table("data/all_anopheles.txt", header = T) %>%
rename(species = Especie,
decimalLatitude = Latitude,
decimalLongitude = Longitude)
df <-
read.table("data/all_anopheles.txt", header = T) %>%
rename(species = Especie,
decimalLatitude = Latitude,
decimalLongitude = longitude)
?bind_rows
anopheles_df <-
all_species_gbif %>%
bind_rows(all_species_splink, df)
anopheles_df <-
anopheles_df[
!duplicated(paste(
anopheles_df$scientificName,
anopheles_df$decimalLongitude,
anopheles_df$decimalLatitude
)),
]
anopheles_df <-
anopheles_df[
!duplicated(paste(
anopheles_df$species,
anopheles_df$decimalLongitude,
anopheles_df$decimalLatitude
)),
]
all_species_gbif <-
all_species %>%
select(species, decimalLatitude, decimalLongitude) %>%
drop_na()
all_species_splink_raw <-
rspeciesLink(
filename = "all_species_splink",
species = splist,
Coordinates = "Yes",
CoordinatesQuality = "Good"
)
all_species_splink <- all_species_splink %>%
rename(species = scientificName) %>%
select(species, decimalLatitude, decimalLongitude) %>%
mutate(
decimalLatitude = as.numeric(decimalLatitude),
decimalLongitude = as.numeric(decimalLongitude)
)
all_species_splink_raw <-
rspeciesLink(
filename = "all_species_splink",
species = splist,
Coordinates = "Yes",
CoordinatesQuality = "Good"
)
all_species_splink <- all_species_splink %>%
rename(species = scientificName) %>%
select(species, decimalLatitude, decimalLongitude) %>%
mutate(
decimalLatitude = as.numeric(decimalLatitude),
decimalLongitude = as.numeric(decimalLongitude)
)
all_species_splink <- all_species_splink_raw %>%
rename(species = scientificName) %>%
select(species, decimalLatitude, decimalLongitude) %>%
mutate(
decimalLatitude = as.numeric(decimalLatitude),
decimalLongitude = as.numeric(decimalLongitude)
)
anopheles_df <-
all_species_gbif %>%
bind_rows(all_species_splink, df)
anopheles_df <-
anopheles_df[
!duplicated(paste(
anopheles_df$species,
anopheles_df$decimalLongitude,
anopheles_df$decimalLatitude
)),
]
levels(as.factor(anopheles_df$species))
df <-
read.table("data/all_anopheles.txt", header = T) %>%
rename(species = Especie,
decimalLatitude = Latitude,
decimalLongitude = longitude) %>%
mutate(species = gsub("_", " ", species))
anopheles_df <-
all_species_gbif %>%
bind_rows(all_species_splink, df)
anopheles_df <-
anopheles_df[
!duplicated(paste(
anopheles_df$species,
anopheles_df$decimalLongitude,
anopheles_df$decimalLatitude
)),
]
levels(as.factor(anopheles_df$species))
word(species , 1  , -2)
anopheles_df %>%
mutate(species = word(species , 1  , -2))
anopheles_df %>%
mutate(species = word(species , 1  , -1))
word(anopheles_df$species , 1  , -1)
levels(as.factor(word(anopheles_df$species , 1  , -1)))
levels(as.factor(anopheles_df$species))
anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi?' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli'
))
anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi?' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
TRUE ~ species
))
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi?' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
TRUE ~ species
))
levels(as.factor(teste$species))
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
TRUE ~ species
))
levels(as.factor(teste$species))
count(levels(as.factor(teste$species)))
levels(as.factor(df$species))
levels(as.factor(teste$species))
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
species == 'Anopheles fluminensis ' ~ 'Anopheles fluminensis'
TRUE ~ species
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
species == 'Anopheles fluminensis ' ~ 'Anopheles fluminensis',
TRUE ~ species
))
levels(as.factor(teste$species))
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
species == 'Anopheles fluminensis  ' ~ 'Anopheles fluminensis',
TRUE ~ species
))
levels(as.factor(teste$species))
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis ',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
species == "Anopheles fluminensis " ~ 'Anopheles fluminensis',
TRUE ~ species
))
levels(as.factor(teste$species))
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',,
TRUE ~ species
))
teste <- anopheles_df %>%
mutate(species = case_when(
species == 'Anopheles albitarsis?' ~ 'Anopheles albitarsis',
species == 'Anopheles oswaldoi?' ~ 'Anopheles oswaldoi' ,
species == 'Anopheles triannulatus s.l.' ~ 'Anopheles triannulatus',
species == 'Anopheles albimanus section' ~ 'Anopheles albimanus',
species == 'Anopheles albitarsis s.l.' ~ 'Anopheles albitarsis',
species == 'Anopheles aquasalis?' ~ 'Anopheles aquasalis',
species == 'Anopheles argyritarsis section' ~ 'Anopheles argyritarsis',
species == 'Anopheles fluminensis *' ~ 'Anopheles fluminensis',
species == 'Anopheles mediopunctatus *' ~ 'Anopheles mediopunctatus',
species == 'Anopheles rangeli?' ~ 'Anopheles rangeli',
TRUE ~ species
))
levels(as.factor(teste$species))
styler:::style_selection()
anopheles_processed <- anopheles_df %>%
mutate(species = case_when(
species == "Anopheles albitarsis?" ~ "Anopheles albitarsis",
species == "Anopheles oswaldoi?" ~ "Anopheles oswaldoi",
species == "Anopheles triannulatus s.l." ~ "Anopheles triannulatus",
species == "Anopheles albimanus section" ~ "Anopheles albimanus",
species == "Anopheles albitarsis s.l." ~ "Anopheles albitarsis",
species == "Anopheles aquasalis?" ~ "Anopheles aquasalis",
species == "Anopheles argyritarsis section" ~ "Anopheles argyritarsis",
species == "Anopheles fluminensis *" ~ "Anopheles fluminensis",
species == "Anopheles mediopunctatus *" ~ "Anopheles mediopunctatus",
species == "Anopheles rangeli?" ~ "Anopheles rangeli",
TRUE ~ species
))
dir.create('data/processed')
anopheles_df <-
all_species_gbif %>%
bind_rows(all_species_splink, df)
levels(as.factor(anopheles_df$species))
anopheles_df <- anopheles_df %>%
mutate(species = case_when(
species == "Anopheles albitarsis?" ~ "Anopheles albitarsis",
species == "Anopheles oswaldoi?" ~ "Anopheles oswaldoi",
species == "Anopheles triannulatus s.l." ~ "Anopheles triannulatus",
species == "Anopheles albimanus section" ~ "Anopheles albimanus",
species == "Anopheles albitarsis s.l." ~ "Anopheles albitarsis",
species == "Anopheles aquasalis?" ~ "Anopheles aquasalis",
species == "Anopheles argyritarsis section" ~ "Anopheles argyritarsis",
species == "Anopheles fluminensis *" ~ "Anopheles fluminensis",
species == "Anopheles mediopunctatus *" ~ "Anopheles mediopunctatus",
species == "Anopheles rangeli?" ~ "Anopheles rangeli",
TRUE ~ species
))
levels(as.factor(anopheles_df$species))
anopheles_processed <-
anopheles_processed[
!duplicated(paste(
anopheles_processed$species,
anopheles_processed$decimalLongitude,
anopheles_processed$decimalLatitude
)),
]
print('diretório já existe')
if(!file.exists('data/processed')){
dir.create('data/processed')
} else {
print('diretório já existe')
}
print('diretório criado')
if(!file.exists('data/processed')){
dir.create('data/processed')
print('diretório criado')
} else {
print('diretório já existe')
}
if(!file.exists('data/processed')){
dir.create('data/processed')
print('diretório criado')
} else {
print('diretório já existe')
}
styler:::style_selection()
styler:::style_selection()
dir_create <- function(dir_name) {
if (!file.exists("data/processed")) {
dir.create("data/processed")
print("diretório criado")
} else {
print("diretório já existe")
}
}
dir_create <- function(dir_name) {
if (!file.exists(dir_name)) {
dir.create(dir_name)
print("diretório criado")
} else {
print("diretório já existe")
}
}
dir_create('data/processed')
write.csv('data/processed/anopheles_processed.csv')
write.csv(anopheles_processed,'data/processed/anopheles_processed.csv')
rm(dir_create())
rm(dir_create
)
source('functions.R')
source('functions.R')
dir_create('data/processed')
rm(teste)
save.image("~/Documents/model-niche-anopheles/t.RData")
save.image("~/Documents/model-niche-anopheles/.RData")
dir_create('data/processed')
styler:::style_selection()
setwd("~/Documents/model-niche-anopheles")
setwd("~/Documents")
library(tidyverse)
library(rgbif)
library(leaflet)
library(Rocc)
especie_lista <- c(
"Anoura caudifer", "Diphylla ecaudata", "Phyllostomus hastatus")
#buscando os registros das espécies na plataforma GBIf
keys <-
lapply(
especie_lista,
function(x) name_suggest(x)$data$key[1]
)
#buscando os dados de registros das espécies na plataforma gbif
occ_morcegos <- occ_download(
pred_in("taxonKey", keys),
pred("hasCoordinate", TRUE),
format = "SIMPLE_CSV",
user = "gratidutra", pwd = "iNm!cD!U6@3LhYH",
email = "gratirodrigues.gdr@gmail.com"
)
z <- occ_download_get(occ_morcegos)
especie_lista <- c(
"Anoura caudifer", "Diphylla ecaudata", "Phyllostomus hastatus")
keys <-
lapply(
especie_lista,
function(x) name_suggest(x)$data$key[1]
)
occ_morcegos <- occ_download(
pred_in("taxonKey", keys),
#pred("hasCoordinate", TRUE),
format = "SIMPLE_CSV",
user = "gratidutra", pwd = "iNm!cD!U6@3LhYH",
email = "gratirodrigues.gdr@gmail.com"
)
z <- occ_download_get(occ_morcegos)
occ_morcegos <- occ_download(
pred_in("taxonKey", keys),
#pred("hasCoordinate", TRUE),
format = "SIMPLE_CSV",
user = "gratidutra", pwd = "iNm!cD!U6@3LhYH",
email = "gratirodrigues.gdr@gmail.com"
)
z <- occ_download_get(occ_morcegos)
occ_morcegos <- occ_download(
pred_in("taxonKey", keys),
#pred("hasCoordinate", TRUE),
format = "SIMPLE_CSV",
user = "gratidutra", pwd = "iNm!cD!U6@3LhYH",
email = "gratirodrigues.gdr@gmail.com"
)
z <- occ_download_get(occ_morcegos)
especie_lista <- c(
"Anoura caudifer", "Diphylla ecaudata")
occ_morcegos <- occ_download(
pred_in("taxonKey", keys),
#pred("hasCoordinate", TRUE),
format = "SIMPLE_CSV",
user = "gratidutra", pwd = "iNm!cD!U6@3LhYH",
email = "gratirodrigues.gdr@gmail.com"
)
z <- occ_download_get(occ_morcegos)
all_species
View(all_species)
